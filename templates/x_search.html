<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>{{ channelname }}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <style>
        body {
            margin: 0;
            font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
            background: #0f0f0f;
            color: #ffffff;
        }

        /* ===== ヘッダー検索バー ===== */
        .topbar {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 16px;
            background: #0f0f0f;
            border-bottom: 1px solid #222;
            position: sticky;
            top: 0;
            z-index: 10;
        }

        .search-form {
            flex: 1;
            display: flex;
        }

        .search-input {
            flex: 1;
            padding: 10px 14px;
            border-radius: 999px 0 0 999px;
            border: none;
            outline: none;
            font-size: 14px;
            background: #181818;
            color: #fff;
        }

        .search-btn {
            padding: 10px 18px;
            border-radius: 0 999px 999px 0;
            border: none;
            background: #303030;
            color: #fff;
            cursor: pointer;
        }

        /* ===== カバー ===== */
        .cover {
            width: 100%;
            height: 180px;
            background-size: cover;
            background-position: center;
        }

        /* ===== チャンネル ===== */
        .channel-header {
            padding: 16px;
            display: flex;
            gap: 16px;
            align-items: center;
        }

        .channel-icon {
            width: 96px;
            height: 96px;
            border-radius: 50%;
        }

        .channel-info {
            flex: 1;
        }

        .channel-name {
            font-size: 20px;
            font-weight: bold;
        }

        .subscriber {
            color: #aaa;
            font-size: 13px;
            margin-top: 4px;
        }

        .channel-profile {
            padding: 0 16px 16px 16px;
            font-size: 14px;
            line-height: 1.6;
            color: #ddd;
            white-space: pre-wrap;
        }

        /* ===== ボタン ===== */
        .actions {
            padding: 0 16px 16px 16px;
        }

        .twitter-link {
            display: inline-block;
            padding: 10px 18px;
            background: #1d9bf0;
            color: #ffffff;
            border-radius: 999px;
            font-size: 14px;
            text-decoration: none;
        }

        .twitter-link:hover {
            opacity: 0.9;
        }

        /* ===== 動画一覧 ===== */
        .video-list {
            padding: 0 16px 32px 16px;
        }

        .video-item {
            display: flex;
            gap: 12px;
            padding: 12px 0;
            border-bottom: 1px solid #222;
            text-decoration: none;
            color: #fff;
        }

        .video-thumb {
            width: 160px;
            height: 90px;
            object-fit: cover;
            background: #000;
            flex-shrink: 0;
        }

        .video-info {
            flex: 1;
        }

        .video-title {
            font-size: 15px;
            font-weight: 500;
            margin-bottom: 6px;
        }

        .video-meta {
            font-size: 12px;
            color: #aaa;
        }
    </style>
</head>
<body>

<!-- ===== 検索バー ===== -->
<div class="topbar">
    <form class="search-form" action="/search" method="get">
        <input
            type="text"
            name="q"
            class="search-input"
            placeholder="検索"
            required
        >
        <button class="search-btn" type="submit">
            検索
        </button>
    </form>
</div>

{% if cover_img_url %}
<div
    class="cover"
    style="background-image: url('{{ cover_img_url }}');">
</div>
{% endif %}

<div class="channel-header">
    <img
        src="{{ channelicon }}"
        class="channel-icon"
        alt="icon"
    >

    <div class="channel-info">
        <div class="channel-name">{{ channelname }}</div>
        {% if subscribers_count %}
        <div class="subscriber">{{ subscribers_count }}</div>
        {% endif %}
    </div>
</div>

{% if channelprofile %}
<div class="channel-profile">
    {{ channelprofile }}
</div>
{% endif %}

<div class="actions">
    <a
        href="/x/search?q={{ channelname | urlencode }}"
        class="twitter-link"
    >
        Twitter
    </a>
</div>

<div class="video-list">
    {% for v in results %}
    <a
        href="/watch?v={{ v.id }}"
        class="video-item"
    >
        <img
            class="video-thumb"
            src="/thumbnail?v={{ v.id }}"
            alt="thumbnail"
        >
        <div class="video-info">
            <div class="video-title">
                {{ v.title }}
            </div>
            <div class="video-meta">
                {{ v.view_count_text }} {{ v.length_str }}
            </div>
        </div>
    </a>
    {% endfor %}
</div>

</body>
</html>
